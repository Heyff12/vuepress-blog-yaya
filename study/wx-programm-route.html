<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>小程序路由配置 | Yaya&#39;s blog</title>
    <meta name="description" content="developer">
    <meta name="generator" content="VuePress 1.4.0">
    <link rel="icon" href="/vuepress-theme-yaya/favicon.ico">
    
    <link rel="preload" href="/vuepress-theme-yaya/assets/css/0.styles.01da24b8.css" as="style"><link rel="preload" href="/vuepress-theme-yaya/assets/js/app.2f160b54.js" as="script"><link rel="preload" href="/vuepress-theme-yaya/assets/js/11.bf18be61.js" as="script"><link rel="preload" href="/vuepress-theme-yaya/assets/js/29.048b2fe4.js" as="script"><link rel="prefetch" href="/vuepress-theme-yaya/assets/js/1.8a7b5334.js"><link rel="prefetch" href="/vuepress-theme-yaya/assets/js/10.2a575ae5.js"><link rel="prefetch" href="/vuepress-theme-yaya/assets/js/12.6169ba02.js"><link rel="prefetch" href="/vuepress-theme-yaya/assets/js/13.f879eb65.js"><link rel="prefetch" href="/vuepress-theme-yaya/assets/js/14.90c8ba07.js"><link rel="prefetch" href="/vuepress-theme-yaya/assets/js/15.2a67c232.js"><link rel="prefetch" href="/vuepress-theme-yaya/assets/js/16.c99d68bf.js"><link rel="prefetch" href="/vuepress-theme-yaya/assets/js/17.aeed1db2.js"><link rel="prefetch" href="/vuepress-theme-yaya/assets/js/18.68a239f5.js"><link rel="prefetch" href="/vuepress-theme-yaya/assets/js/19.5c95c735.js"><link rel="prefetch" href="/vuepress-theme-yaya/assets/js/2.bdd7f2ee.js"><link rel="prefetch" href="/vuepress-theme-yaya/assets/js/20.55a92961.js"><link rel="prefetch" href="/vuepress-theme-yaya/assets/js/21.a34bc90c.js"><link rel="prefetch" href="/vuepress-theme-yaya/assets/js/22.6684ba24.js"><link rel="prefetch" href="/vuepress-theme-yaya/assets/js/23.b0f96d10.js"><link rel="prefetch" href="/vuepress-theme-yaya/assets/js/24.88b22dad.js"><link rel="prefetch" href="/vuepress-theme-yaya/assets/js/25.69ae06e9.js"><link rel="prefetch" href="/vuepress-theme-yaya/assets/js/26.508b41a8.js"><link rel="prefetch" href="/vuepress-theme-yaya/assets/js/27.97fcfee1.js"><link rel="prefetch" href="/vuepress-theme-yaya/assets/js/28.379062a6.js"><link rel="prefetch" href="/vuepress-theme-yaya/assets/js/30.5b5d0e7d.js"><link rel="prefetch" href="/vuepress-theme-yaya/assets/js/31.4a1b9f0f.js"><link rel="prefetch" href="/vuepress-theme-yaya/assets/js/32.1b84e408.js"><link rel="prefetch" href="/vuepress-theme-yaya/assets/js/33.f68e36dd.js"><link rel="prefetch" href="/vuepress-theme-yaya/assets/js/34.b132001d.js"><link rel="prefetch" href="/vuepress-theme-yaya/assets/js/35.49a93df3.js"><link rel="prefetch" href="/vuepress-theme-yaya/assets/js/36.a55411fa.js"><link rel="prefetch" href="/vuepress-theme-yaya/assets/js/37.7f60828c.js"><link rel="prefetch" href="/vuepress-theme-yaya/assets/js/5.3ecb30f2.js"><link rel="prefetch" href="/vuepress-theme-yaya/assets/js/6.04c7a49a.js"><link rel="prefetch" href="/vuepress-theme-yaya/assets/js/7.5ea1fb7c.js"><link rel="prefetch" href="/vuepress-theme-yaya/assets/js/8.60716311.js"><link rel="prefetch" href="/vuepress-theme-yaya/assets/js/9.26178ef3.js"><link rel="prefetch" href="/vuepress-theme-yaya/assets/js/vuejs-paginate.2a3d92ae.js">
    <link rel="stylesheet" href="/vuepress-theme-yaya/assets/css/0.styles.01da24b8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="globalLayout" data-v-66bc05ca><section class="header" data-v-5d8396a2 data-v-66bc05ca><section class="headerInner" style="border-color:;" data-v-5d8396a2><section class="headerBody" data-v-5d8396a2><section class="logo" data-v-5d8396a2><a href="/vuepress-theme-yaya/" class="router-link-active" data-v-5d8396a2><img src="/vuepress-theme-yaya/logo.png" alt="Yaya's blog" data-v-5d8396a2></a></section> <section class="menu" data-v-5d8396a2></section></section></section></section> <section class="global-body" data-v-66bc05ca><section class="containerOuter" data-v-3373dcf0 data-v-266801e6 data-v-66bc05ca><section class="containerInner" style="border-color:;" data-v-3373dcf0><section class="bodyPadding color" style="background-color:;" data-v-3373dcf0><section class="containerHeader" data-v-3373dcf0><section class="pageHeader" data-v-0bdad20e data-v-266801e6><section class="pageHeaderLeft show" data-v-0bdad20e><p class="back" data-v-0bdad20e><i class="iconfont iconfanhui" data-v-0bdad20e></i>返回
    </p> <ul data-v-0bdad20e> <!----></ul></section> <!----></section></section></section> <section class="bodyPadding" data-v-3373dcf0><section class="containerBody" data-v-3373dcf0> <section class="postDetail" data-v-3373dcf0 data-v-266801e6><section class="postDetailBody" data-v-3373dcf0 data-v-266801e6><h3 class="title" data-v-3373dcf0 data-v-266801e6>小程序路由配置</h3> <section class="note" data-v-3373dcf0 data-v-266801e6><span class="noteItem" data-v-3373dcf0 data-v-266801e6><i class="iconfont iconriqi" data-v-3373dcf0 data-v-266801e6></i>2023-08-4</span> <!----> <div class="tags" data-v-3373dcf0 data-v-266801e6><a href="/vuepress-theme-yaya/tags/haha" data-v-266801e6><i class="iconfont icontag" data-v-266801e6></i>haha
          </a><a href="/vuepress-theme-yaya/tags/hehe" data-v-266801e6><i class="iconfont icontag" data-v-266801e6></i>hehe
          </a><a href="/vuepress-theme-yaya/tags/CI/CD" data-v-266801e6><i class="iconfont icontag" data-v-266801e6></i>CI/CD
          </a><a href="/vuepress-theme-yaya/tags/travis" data-v-266801e6><i class="iconfont icontag" data-v-266801e6></i>travis
          </a><a href="/vuepress-theme-yaya/tags/github actons" data-v-266801e6><i class="iconfont icontag" data-v-266801e6></i>github actons
          </a><a href="/vuepress-theme-yaya/tags/docker" data-v-266801e6><i class="iconfont icontag" data-v-266801e6></i>docker
          </a><a href="/vuepress-theme-yaya/tags/ssh免密登录" data-v-266801e6><i class="iconfont icontag" data-v-266801e6></i>ssh免密登录
          </a><a href="/vuepress-theme-yaya/tags/初学者" data-v-266801e6><i class="iconfont icontag" data-v-266801e6></i>初学者
          </a></div></section> <section class="markdownBody" data-v-3373dcf0 data-v-266801e6><div class="content__default" data-v-266801e6><h2 id="一、小程序跳转方式"><a href="#一、小程序跳转方式" class="header-anchor">#</a> 一、小程序跳转方式</h2> <h3 id="_1、wx-switchtab-object-object"><a href="#_1、wx-switchtab-object-object" class="header-anchor">#</a> 1、wx.switchTab(Object object)</h3> <blockquote><p>跳转到 tabBar 页面，并关闭其他所有非 tabBar 页面</p></blockquote> <blockquote><p>需要跳转的 tabBar 页面的路径 (代码包路径)（需在 app.json 的 tabBar 字段定义的页面），路径后不能带参数。</p></blockquote> <p>使用备注：由于 tabBar 在切换器需要获取收取及是否登录的判断，故当前小程序的 tabBar 是自定义组件，该跳转无效</p> <p><strong><em>只有该方法的 url 参数，不能进行拼接，必须跟 tabBar 配置的路由一模一样；wx.navigateBack 没有 url 参数</em></strong></p> <h3 id="_2、wx-relaunch-object-object"><a href="#_2、wx-relaunch-object-object" class="header-anchor">#</a> 2、wx.reLaunch(Object object)</h3> <blockquote><p>关闭所有页面，打开到应用内的某个页面</p></blockquote> <h3 id="_3、wx-redirectto-object-object"><a href="#_3、wx-redirectto-object-object" class="header-anchor">#</a> 3、wx.redirectTo(Object object)</h3> <blockquote><p>关闭当前页面，跳转到应用内的某个页面。但是不允许跳转到 tabbar 页面。</p></blockquote> <p><strong><em>导航样式：
如果当前只有一个路由层级，导航 header 左侧会默认显示可以进入“首页”的图标</em></strong></p> <h3 id="_4、wx-navigateto-object-object"><a href="#_4、wx-navigateto-object-object" class="header-anchor">#</a> 4、wx.navigateTo(Object object)</h3> <blockquote><p>保留当前页面，跳转到应用内的某个页面。但是不能跳到 tabbar 页面。使用 wx.navigateBack 可以返回到原页面。小程序中页面栈最多十层。</p></blockquote> <blockquote><p>events 用于监听被打开页面发送到当前页面的数据。</p></blockquote> <p>导航样式：导航 header 左侧会默认显示“返回”的图标</p> <h3 id="_5、wx-navigateback-object-object"><a href="#_5、wx-navigateback-object-object" class="header-anchor">#</a> 5、wx.navigateBack(Object object)</h3> <blockquote><p>关闭当前页面，返回上一页面或多级页面。可通过 getCurrentPages 获取当前的页面栈，决定需要返回几层。</p></blockquote> <blockquote><p>通过参数 delta 设置返回的页面数，如果 delta 大于现有页面数，则返回到首页。默认值为 1</p></blockquote> <h2 id="二、二货集小程序路由分析"><a href="#二、二货集小程序路由分析" class="header-anchor">#</a> 二、二货集小程序路由分析</h2> <h3 id="_1、目前所有-pages-总计-10-个"><a href="#_1、目前所有-pages-总计-10-个" class="header-anchor">#</a> 1、目前所有 pages——总计 10 个</h3> <blockquote><p>存在潜在路由层级超过 10 个风险</p></blockquote> <p><strong><em>当路由层级达到 10 个时，wx.navigateTo 将无法打开新页面</em></strong></p> <div class="language- extra-class"><pre class="language-text"><code>'pages/index/index',
'pages/publish/index',
'pages/detail/index',
'pages/search/index',
'pages/profile/index',
'pages/profile/contact/index',
'pages/profile/contact/add/index',
'pages/profile/edit/index',
'pages/profile/feedback',
'pages/myProductList/index',
</code></pre></div><h3 id="_2、路由跳转方式使用现状"><a href="#_2、路由跳转方式使用现状" class="header-anchor">#</a> 2、路由跳转方式使用现状</h3> <h4 id="_2-1、wx-redirectto-的使用"><a href="#_2-1、wx-redirectto-的使用" class="header-anchor">#</a> 2.1、wx.redirectTo 的使用</h4> <blockquote><p>使用条件</p></blockquote> <ul><li>不需要返回到当前页面时</li> <li>同时，其他页面仍需要返回显示时</li></ul> <blockquote><p>使用效果</p></blockquote> <ul><li>关闭当前页面，同时打开一个新页面，即便新页面还在路由栈里
<ul><li>在新页面不会返回到当前页面</li></ul></li> <li>路由栈层级级数不变
<ul><li>跟在当前页的路由栈层级比较起来，层级不变</li> <li>跟进入该页面之前比起来，路由栈层级增加 1</li> <li>如果反复进入该当前页面，则会导致路由层级不断增加</li> <li>需要谨慎使用</li></ul></li></ul> <blockquote><p>使用页面</p></blockquote> <ul><li>发布页面，在新建状态下，提交成功后，进入“该商品详情页”
<ul><li>从发布页接入详情页，不需要再次返回进入发布页</li> <li>进入详情页后，依然需要保持之前的页面存在，进行正常返回</li></ul></li></ul> <h4 id="_2-2、自定义-tabbar-跳转方式-wx-relaunch"><a href="#_2-2、自定义-tabbar-跳转方式-wx-relaunch" class="header-anchor">#</a> 2.2、自定义 tabBar 跳转方式 wx.reLaunch</h4> <blockquote><p>使用效果</p></blockquote> <ul><li>每次切换，都会关闭当前的所有页面，继而打开一个新页面
<ul><li>如果使用 wx.navigateTo，通过 tabBar 的切换，很快就会超过 10 个路由栈层级</li> <li>如果使用 wx.redirectTo，存在路由栈超过 10 级的风险</li></ul></li></ul> <blockquote><p>tabBar 使用页面</p></blockquote> <ul><li>首页——'pages/index/index'</li> <li>发布——'pages/publish/index'</li> <li>个人中心——'pages/profile/index'</li></ul> <h4 id="_2-3、wx-relaunch-方式的使用"><a href="#_2-3、wx-relaunch-方式的使用" class="header-anchor">#</a> 2.3、wx.reLaunch 方式的使用</h4> <blockquote><p>使用效果</p></blockquote> <ul><li>关闭当前所有页面，打开一个新页面</li> <li>路由栈层级级数变成 1</li></ul> <blockquote><p>使用页面</p></blockquote> <ul><li>tabBar 组件</li> <li>搜索页面，点击“取消/返回”按钮，进回“首页”
<ul><li>如果该页面使用 wx.navigateTo，则进入的“首页”header 部分会显示“返回”图标</li> <li>如果该页面使用 wx.redirectTo，反复执行“首页——搜索页——首页”这个操作路径，会导致层级达到 10 级</li> <li>该页面，也可以使用 wx.navigateBack。在不清楚之后会有什么样交互的前提下，wx.reLaunch 更加保险</li></ul></li></ul> <h4 id="_2-4、wx-navigateback-方式的使用"><a href="#_2-4、wx-navigateback-方式的使用" class="header-anchor">#</a> 2.4、wx.navigateBack 方式的使用</h4> <blockquote><p>使用条件</p></blockquote> <ul><li>不需要返回到当前页面时</li> <li>返回层级数目明确的情况下使用</li></ul> <blockquote><p>使用效果</p></blockquote> <ul><li>关闭当前页面，进入之前的页面
<ul><li>在之前的页面点击返回按钮，不会再进入该页面</li></ul></li> <li>路由栈层级减少一级
<ul><li>跟在当前页的路由栈层级比较起来，减少一级</li> <li>跟进入该页面之前比起来，路由栈层级不变</li></ul></li></ul> <blockquote><p>使用页面</p></blockquote> <ul><li>发布页面，在编辑状态下，提交成功后，返回“该商品详情页”</li> <li>发布页面，在编辑状态下，如果获取初始信息失败，返回“该商品详情页”</li> <li>新增联系方式页面，提交成功后，返回“联系方式列表页面”</li></ul> <h4 id="_2-5、wx-navigateto-方式的使用"><a href="#_2-5、wx-navigateto-方式的使用" class="header-anchor">#</a> 2.5、wx.navigateTo 方式的使用</h4> <blockquote><p>使用条件</p></blockquote> <ul><li>需要返回到当前页面时，使用该方法</li></ul> <blockquote><p>使用效果</p></blockquote> <ul><li>保留当前页面，打开一个页面
<ul><li>可以在新页面返回到当前页面</li></ul></li> <li>路由栈层级增加一级</li> <li>谨慎使用</li></ul> <blockquote><p>使用页面</p></blockquote> <ul><li>首页推荐产品、搜索结果页，点击商品图片，进入“该商品详情页”</li> <li>首页分类模块，点击“分类图标”，进入“搜索-结果页”</li> <li>首页搜索模块，点击“搜索栏”，进入“搜索页”</li> <li>商品详情页面，点击“管理——编辑”，进入“发布页面-编辑态”</li> <li>搜索页面-模糊搜索结果，点击“商品标题”，进入“该商品详情页”</li> <li>个人中心，进入“修改个人信息页面”、“反馈页面”、“进入联系方式页面”、“发布/收藏产品列表页面”</li> <li>个人中心-我的发布、我的收藏页面，点击商品图片，进入“该商品详情页”</li> <li>个人中心-联系方式页面，点击“新增按钮”，进入“新增页面”</li></ul> <h2 id="三、注意事项"><a href="#三、注意事项" class="header-anchor">#</a> 三、注意事项</h2> <ul><li>尽量保证每个跳转循环完成后，路由层级不会增加，最好只有一个路由层级</li> <li>注意出现页面跳转循环的路径</li></ul> <h2 id="四、分包"><a href="#四、分包" class="header-anchor">#</a> 四、分包</h2> <ul><li>app:首页 商品详情页</li> <li>搜索</li> <li>发布</li> <li>个人中心</li></ul></div></section></section> <section class="postDetailNav" style="display:none;" data-v-3373dcf0 data-v-266801e6><section class="pageMenu" data-v-3373dcf0 data-v-266801e6><ul data-v-3373dcf0 data-v-266801e6><li class="nav2" data-v-3373dcf0 data-v-266801e6><a href="#一、小程序跳转方式" data-v-3373dcf0 data-v-266801e6>
              一、小程序跳转方式
            </a></li><li class="nav3" data-v-3373dcf0 data-v-266801e6><a href="#_1、wx-switchtab-object-object" data-v-3373dcf0 data-v-266801e6>
              1、wx.switchTab(Object object)
            </a></li><li class="nav3" data-v-3373dcf0 data-v-266801e6><a href="#_2、wx-relaunch-object-object" data-v-3373dcf0 data-v-266801e6>
              2、wx.reLaunch(Object object)
            </a></li><li class="nav3" data-v-3373dcf0 data-v-266801e6><a href="#_3、wx-redirectto-object-object" data-v-3373dcf0 data-v-266801e6>
              3、wx.redirectTo(Object object)
            </a></li><li class="nav3" data-v-3373dcf0 data-v-266801e6><a href="#_4、wx-navigateto-object-object" data-v-3373dcf0 data-v-266801e6>
              4、wx.navigateTo(Object object)
            </a></li><li class="nav3" data-v-3373dcf0 data-v-266801e6><a href="#_5、wx-navigateback-object-object" data-v-3373dcf0 data-v-266801e6>
              5、wx.navigateBack(Object object)
            </a></li><li class="nav2" data-v-3373dcf0 data-v-266801e6><a href="#二、二货集小程序路由分析" data-v-3373dcf0 data-v-266801e6>
              二、二货集小程序路由分析
            </a></li><li class="nav3" data-v-3373dcf0 data-v-266801e6><a href="#_1、目前所有-pages-总计-10-个" data-v-3373dcf0 data-v-266801e6>
              1、目前所有 pages——总计 10 个
            </a></li><li class="nav3" data-v-3373dcf0 data-v-266801e6><a href="#_2、路由跳转方式使用现状" data-v-3373dcf0 data-v-266801e6>
              2、路由跳转方式使用现状
            </a></li><li class="nav2" data-v-3373dcf0 data-v-266801e6><a href="#三、注意事项" data-v-3373dcf0 data-v-266801e6>
              三、注意事项
            </a></li><li class="nav2" data-v-3373dcf0 data-v-266801e6><a href="#四、分包" data-v-3373dcf0 data-v-266801e6>
              四、分包
            </a></li></ul></section></section></section> <section class="rewardOut" data-v-57b46546 data-v-266801e6><section class="rewardIn" data-v-57b46546>赞</section> <section class="rewardPic" data-v-57b46546><dl data-v-57b46546><dt data-v-57b46546><img src="/vuepress-theme-yaya/alipay.png" alt="支付宝打赏" data-v-57b46546></dt> <dd data-v-57b46546>支付宝打赏</dd></dl> <dl data-v-57b46546><dt data-v-57b46546><img src="/vuepress-theme-yaya/wechat.png" alt="微信打赏" data-v-57b46546></dt> <dd data-v-57b46546>微信打赏</dd></dl></section></section> <section class="postComment" data-v-3373dcf0 data-v-266801e6><!----></section></section></section></section></section></section> <section class="footer" data-v-6fabaa46 data-v-66bc05ca><section class="footer_link" data-v-6fabaa46><a href="https://github.com/Heyff12/vuepress-blog-yaya" target="_blank" data-v-6fabaa46>
      Github
    </a><a href="/vuepress-theme-yaya/tags" target="_self" data-v-6fabaa46>
      标签
    </a></section> <section class="footer_content" data-v-6fabaa46><span data-v-6fabaa46>Author By Yaya</span>|
    <span data-v-6fabaa46>Powered By
      <a href="https://v1.vuepress.vuejs.org/zh/guide/" data-v-6fabaa46>VuePress</a></span>|
     <span data-v-6fabaa46><a href="https://beian.miit.gov.cn/#/Integrated/index" target="_blank" data-v-6fabaa46>豫ICP备14017364号-1</a></span></section></section></div><div class="global-ui"><!----></div></div>
    <script src="/vuepress-theme-yaya/assets/js/app.2f160b54.js" defer></script><script src="/vuepress-theme-yaya/assets/js/11.bf18be61.js" defer></script><script src="/vuepress-theme-yaya/assets/js/29.048b2fe4.js" defer></script>
  </body>
</html>
